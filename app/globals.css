@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Midnight Ledger — dark theme */
    --background: 222 22% 8%;
    --foreground: 210 25% 92%;
    --card: 222 20% 11%;
    --card-foreground: 210 25% 92%;
    --popover: 222 18% 13%;
    --popover-foreground: 210 25% 92%;
    --primary: 160 72% 40%;
    --primary-foreground: 222 22% 8%;
    --secondary: 222 18% 15%;
    --secondary-foreground: 210 20% 85%;
    --muted: 222 16% 18%;
    --muted-foreground: 215 12% 56%;
    --accent: 38 90% 50%;
    --accent-foreground: 222 22% 8%;
    --destructive: 350 80% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 222 14% 22%;
    --input: 222 16% 14%;
    --ring: 160 72% 40%;
    --radius: 0.375rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@layer components {
  /* ── Budget Table ──────────────────────────────────────── */
  .budget-table {
    @apply w-full border-collapse;
  }

  .budget-table th {
    @apply px-3 py-2 text-xs font-semibold uppercase tracking-wider;
    color: hsl(var(--muted-foreground));
    border-bottom: 1px solid hsl(var(--border));
  }

  .budget-table td {
    @apply px-3 py-1.5;
    border-bottom: 1px solid hsl(var(--border) / 0.4);
  }

  .budget-table tbody tr:hover td {
    background-color: hsl(var(--muted) / 0.4);
  }

  .category-group td {
    background-color: hsl(222 16% 20%);
    color: hsl(var(--foreground));
    border-top: 1px solid hsl(var(--border));
    border-bottom: 1px solid hsl(var(--border));
    @apply font-bold text-sm;
  }

  .budget-table .category-name {
    padding-left: 2rem; /* pl-8 — needs higher specificity than .budget-table td */
  }

  .budgeted-input {
    @apply w-28 px-2 py-1 rounded text-right text-sm focus:outline-none focus:ring-2;
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
    background-color: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    color: hsl(var(--foreground));
    --tw-ring-color: hsl(var(--primary));
  }

  /* ── Amount text ───────────────────────────────────────── */
  .amount-positive {
    color: hsl(160 72% 52%);
    @apply font-medium;
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
  }

  .amount-negative {
    color: hsl(350 80% 65%);
    @apply font-medium;
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
  }

  /* ── Available column badges ───────────────────────────── */
  .available-positive {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold;
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
    background-color: hsl(160 72% 40% / 0.22);
    color: hsl(160 72% 62%);
    margin-right: -0.625rem; /* pulls pill right so text aligns with plain numbers */
  }

  .available-zero {
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
    color: hsl(var(--muted-foreground));
    @apply text-xs font-medium;
  }

  .available-negative {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold;
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
    background-color: hsl(350 80% 60% / 0.22);
    color: hsl(350 80% 72%);
    margin-right: -0.625rem; /* pulls pill right so text aligns with plain numbers */
  }

  /* ── Utility classes ───────────────────────────────────── */
  .financial-figure {
    font-family: var(--font-dm-sans), system-ui, sans-serif;
    font-variant-numeric: tabular-nums;
  }

  .font-display {
    font-family: var(--font-syne), var(--font-dm-sans), system-ui, sans-serif;
  }
}
